(function(){var f=function(a,c){var b=null,d,h;d=a.$control.data("storage-status");if(c&&d)b=d;else switch(c?(d=a.$control.find('li:has(span[data-default="true"])').eq(0),0>=d.length&&(d=a.$control.find("li:eq(0)"))):d=a.$control.find(".active"),d=d.find("span"),a.action){case "paging":b=new jQuery.fn.jplist.ui.controls.DropdownPaginationDTO(d.attr("data-number"));b=new jQuery.fn.jplist.app.dto.StatusDTO(a.name,a.action,a.type,b,a.inStorage,a.inAnimation,a.isAnimateToTop,a.inDeepLinking);break;case "sort":(b=
a.$control.attr("data-datetime-format"))||(b="");(h=a.$control.attr("data-ignore"))||(h="");b=new jQuery.fn.jplist.ui.controls.DropdownSortDTO(d.attr("data-path"),d.attr("data-type"),d.attr("data-order"),b,h);b=new jQuery.fn.jplist.app.dto.StatusDTO(a.name,a.action,a.type,b,a.inStorage,a.inAnimation,a.isAnimateToTop,a.inDeepLinking);break;case "filter":b=new jQuery.fn.jplist.ui.controls.DropdownFilterDTO(d.attr("data-path"),d.attr("data-type")),b=new jQuery.fn.jplist.app.dto.StatusDTO(a.name,a.action,
a.type,b,a.inStorage,a.inAnimation,a.isAnimateToTop,a.inDeepLinking)}return b},g=function(a,c){var b,d,h;a.$control.find("span").each(function(){b=jQuery(this).attr("data-path");d=jQuery(this).attr("data-type");b&&""!==jQuery.trim(b)&&(h=new jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel(b,d),c.push(h))})},k=function(a){var c=jQuery(document).find('[data-control-type="drop-down"]');jQuery(document).click(function(){c.find("ul").hide()});jQuery(document).off("jplist_dropdown_close").on("jplist_dropdown_close",
function(a,d){c.each(function(){jQuery(this).is(d)||jQuery(this).find("ul").hide()})});a.$control.find(".jplist-dd-panel").off().click(function(a){var d;a.stopPropagation();a=jQuery(this).parents("[data-control-type]");d=a.find("ul");jQuery(document).trigger("jplist_dropdown_close",[a]);d.is(":visible")?d.hide():d.show()});a.$control.find("li").off().click(function(){var b,d,c,e;b=f(a,!1);e=jQuery(this).find("span");d=e.attr("data-path");c=e.attr("data-number");d?(b.data.path=d,b.data.type=e.attr("data-type"),
b.data.order=e.attr("data-order")):c&&(b.data.number=c);a.history.addStatus(b);a.observer.trigger(a.observer.events.statusEvent,[b])})},e=function(a){var c;c=a.$control.find("li:eq(0)");c.addClass("active");c=c.find("span");0>=a.$control.find(".jplist-dd-panel").length&&a.$control.prepend('<div class="jplist-dd-panel">'+c.text()+"</div>");k(a);return jQuery.extend(this,a)};e.prototype.getStatus=function(a){return f(this,a)};e.prototype.getDeepLink=function(){var a="",c;if(this.inDeepLinking&&(c=f(this,
!1),c.data))switch(this.action){case "paging":if(jQuery.isNumeric(c.data.number)||"all"===c.data.number)a=this.name+this.options.delimiter0+"number="+c.data.number;break;case "sort":c.data.path&&(c.data.type&&c.data.order)&&(a=this.name+this.options.delimiter0+"path"+this.options.delimiter2+"type"+this.options.delimiter2+"order="+c.data.path+this.options.delimiter2+c.data.type+this.options.delimiter2+c.data.order);break;case "filter":c.data.path&&(a=this.name+this.options.delimiter0+"path="+c.data.path)}return a};
e.prototype.getStatusByDeepLink=function(a,c){var b;a:{b=null;var d;if(this.inDeepLinking){if("number"!==a&&a!=="path"+this.options.delimiter2+"type"+this.options.delimiter2+"order"&&"path"!==a){b=null;break a}b=f(this,!0);if(b.data)switch(this.action){case "paging":"number"===a&&jQuery.isNumeric(b.data.number)&&(b.data.number=c);break;case "sort":a==="path"+this.options.delimiter2+"type"+this.options.delimiter2+"order"&&(d=c.split(this.options.delimiter2),3===d.length&&(b.data.path=d[0],b.data.type=
d[1],b.data.order=d[2]));break;case "filter":"path"===a&&b.data.path&&(b.data.path=c)}}}return b};e.prototype.getPaths=function(a){g(this,a)};e.prototype.setStatus=function(a,c){var b;b=null;var d;this.inStorage&&c&&this.$control.data("storage-status",a);!this.inStorage&&c&&(d=this.$control.find('li:has(span[data-default="true"])').eq(0),0>=d.length&&(d=this.$control.find("li:eq(0)")),b=d.find("span"));d=this.$control.find("li");switch(this.action){case "filter":!this.inStorage&&c&&0<b.length?(a.data.path=
b.attr("data-path"),a.data.type=b.attr("data-type"),this.history.addStatus(a),this.observer.trigger(this.observer.events.statusEvent,[a])):(d.removeClass("active"),b=this.$control.find('li:has([data-path="'+a.data.path+'"])'),0>=b.length&&(b=d.eq(0)),b.addClass("active"),this.$control.find(".jplist-dd-panel").text(b.eq(0).text()));break;case "sort":!this.inStorage&&c&&0<b.length?(a.data.path=b.attr("data-path"),a.data.type=b.attr("data-type"),a.data.order=b.attr("data-order"),this.history.addStatus(a),
this.observer.trigger(this.observer.events.statusEvent,[a])):(d.removeClass("active"),b="default"==a.data.path?this.$control.find('li:has([data-path="default"])'):this.$control.find('li:has([data-path="'+a.data.path+'"][data-type="'+a.data.type+'"][data-order="'+a.data.order+'"])'),0>=b.length&&(b=d.eq(0)),b.addClass("active"),this.$control.find(".jplist-dd-panel").text(b.eq(0).text()));break;case "paging":!this.inStorage&&c&&0<b.length?(a.data.number=b.attr("data-number"),this.history.addStatus(a),
this.observer.trigger(this.observer.events.statusEvent,[a])):(d.removeClass("active"),b=this.$control.find('li:has([data-number="'+a.data.number+'"])'),0===b.length&&(b=this.$control.find('li:has([data-number="all"])')),0>=b.length&&(b=d.eq(0)),b.addClass("active"),this.$control.find(".jplist-dd-panel").text(b.eq(0).text()))}};jQuery.fn.jplist.ui.controls.Dropdown=function(a){return new e(a)};jQuery.fn.jplist.controlTypes["drop-down"]={className:"Dropdown",options:{}}})();(function(){var f=function(a,c){var b,d=null,e="",f="";b=a.$control.data("storage-status");if(c&&b)d=b;else switch(c?(b=a.$control.find('option[data-default="true"]').eq(0),0>=b.length&&(b=a.$control.find("option").eq(0))):b=a.$control.find("option:selected"),a.action){case "paging":d=new jQuery.fn.jplist.ui.controls.DropdownPaginationDTO(b.attr("data-number"));d=new jQuery.fn.jplist.app.dto.StatusDTO(a.name,a.action,a.type,d,a.inStorage,a.inAnimation,a.isAnimateToTop,a.inDeepLinking);break;case "sort":e=
a.$control.attr("data-datetime-format")||"";f=a.$control.attr("data-ignore")||"";d=new jQuery.fn.jplist.ui.controls.DropdownSortDTO(b.attr("data-path"),b.attr("data-type"),b.attr("data-order"),e,f);d=new jQuery.fn.jplist.app.dto.StatusDTO(a.name,a.action,a.type,d,a.inStorage,a.inAnimation,a.isAnimateToTop,a.inDeepLinking);break;case "filter":d=new jQuery.fn.jplist.ui.controls.DropdownFilterDTO(b.attr("data-path"),b.attr("data-type")),d=new jQuery.fn.jplist.app.dto.StatusDTO(a.name,a.action,a.type,
d,a.inStorage,a.inAnimation,a.isAnimateToTop,a.inDeepLinking)}return d},g=function(a,c){var b,d,e;a.$control.find("option").each(function(){b=jQuery(this).attr("data-path");d=jQuery(this).attr("data-type");b&&(e=new jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel(b,d),c.push(e))})},k=function(a){a.$control.change(function(){var c,b,d;c=f(a,!1);b=jQuery(this).find("option:selected");d=b.attr("data-path");b=b.attr("data-number");d?(c.data.path=d,c.data.type=jQuery(this).attr("data-type"),
c.data.order=jQuery(this).attr("data-order")):b&&(c.data.number=b);a.history.addStatus(c);a.observer.trigger(a.observer.events.statusEvent,[c])})},e=function(a){k(a);return jQuery.extend(this,a)};e.prototype.getStatus=function(a){return f(this,a)};e.prototype.getDeepLink=function(){var a="",c;if(this.inDeepLinking&&(c=f(this,!1),c.data))switch(this.action){case "paging":jQuery.isNumeric(c.data.number)&&(a=this.name+this.options.delimiter0+"number="+c.data.number);break;case "sort":c.data.path&&(c.data.type&&
c.data.order)&&(a=this.name+this.options.delimiter0+"path"+this.options.delimiter2+"type"+this.options.delimiter2+"order="+c.data.path+this.options.delimiter2+c.data.type+this.options.delimiter2+c.data.order);break;case "filter":c.data.path&&(a=this.name+this.options.delimiter0+"path="+c.data.path)}return a};e.prototype.getStatusByDeepLink=function(a,c){var b=null,d;if(this.inDeepLinking&&(b=f(this,!0),b.data))switch(this.action){case "paging":"number"===a&&jQuery.isNumeric(b.data.number)&&(b.data.number=
c);break;case "sort":a==="path"+this.options.delimiter2+"type"+this.options.delimiter2+"order"&&(d=c.split(this.options.delimiter2),3===d.length&&(b.data.path=d[0],b.data.type=d[1],b.data.order=d[2]));break;case "filter":"path"===a&&b.data.path&&(b.data.path=c)}return b};e.prototype.getPaths=function(a){g(this,a)};e.prototype.setStatus=function(a,c){var b;this.inStorage&&c&&this.$control.data("storage-status",a);switch(this.action){case "filter":if(!this.inStorage&&c)a.data.path="default",this.history.addStatus(a),
this.observer.trigger(this.observer.events.statusEvent,[a]);else if((b=this.$control.find('option[data-path="'+a.data.path+'"]'))&&0<b.length)b.get(0).selected=!0;break;case "sort":!this.inStorage&&c?(a.data.path="default",this.history.addStatus(a),this.observer.trigger(this.observer.events.statusEvent,[a])):(b="default"==a.data.path?this.$control.find('option[data-path="'+a.data.path+'"]'):this.$control.find('option[data-path="'+a.data.path+'"][data-type="'+a.data.type+'"][data-order="'+a.data.order+
'"]'),0<b.length&&(b.get(0).selected=!0));break;case "paging":b=this.$control.find('option[data-number="'+a.data.number+'"]'),0===b.length&&(b=this.$control.find('option[data-number="all"]')),b.get(0).selected=!0}};jQuery.fn.jplist.ui.controls.Select=function(a){return new e(a)};jQuery.fn.jplist.controlTypes.select={className:"Select",options:{}}})();(function(){jQuery.fn.jplist.ui.controls.DropdownFilterDTO=function(f,g){return{path:f,type:g,filterType:"path"}}})();(function(){jQuery.fn.jplist.ui.controls.DropdownPaginationDTO=function(f){return{number:f}}})();(function(){jQuery.fn.jplist.ui.controls.DropdownSortDTO=function(f,g,k,e,a){return{path:f,type:g,order:k,dateTimeFormat:e,ignore:a}}})();
