(function(){var k=function(a,b){var c,d,f,g,e=null,h="";d=a.$control.data("path");g=a.$control.data("dataType");f=a.$control.data("dataText");c=a.$control.data("$countValue");switch(g){case "path":e=jQuery.fn.jplist.domain.dom.services.FiltersService.pathFilter(d,b);break;case "text":a.controlOptions&&a.controlOptions.ignore&&(h=a.controlOptions.ignore);e=jQuery.fn.jplist.domain.dom.services.FiltersService.textFilter(f,d,b,h);break;case "range":e=jQuery.fn.jplist.domain.dom.services.FiltersService.rangeFilter(d,
b,0,0,Number(a.$control.data("dataMin")),Number(a.$control.data("dataMax")))}e&&(c.html(e.length),0===e.length?a.$control.addClass("count-0"):a.$control.removeClass("count-0"))},l=function(a){switch(a.$control.data("dataMode")){case "static":a.observer.on(a.observer.events.collectionReadyEvent,function(b,c){k(a,c.dataitems)});break;case "filter":a.observer.on(a.observer.events.filterEvent,function(b,c,d){k(a,d.dataview)});break;case "all":a.observer.on(a.observer.events.setStatusesEvent,function(b,
c,d){k(a,d.dataview)})}},m=function(a){var b,c,d,f,g,e,h;b=a.$control.attr("data-format");f=a.$control.attr("data-mode")||"static";g=a.$control.attr("data-type")||"path";c=a.$control.attr("data-path");d=a.$control.attr("data-text");e=Number(a.$control.attr("data-min"));h=Number(a.$control.attr("data-max"));b&&(b=b.replace("{count}",'<span data-type="count-value"></span>'),a.$control.html(b),b=a.$control.find('[data-type="count-value"]'),a.$control.data("$countValue",b));c&&(b=new jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel(c,
null),a.$control.data("path",b));a.$control.data("dataMode",f);a.$control.data("dataType",g);a.$control.data("dataPath",c);a.$control.data("dataText",d);a.$control.data("dataMin",e);a.$control.data("dataMax",h);l(a);return jQuery.extend(this,a)};jQuery.fn.jplist.ui.controls.Counter=function(a){return new m(a)};jQuery.fn.jplist.controlTypes.counter={className:"Counter",options:{ignore:"[~!@#$%^&*()+=`'\"/\\_]+"}}})();
