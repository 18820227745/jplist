(function(){var e=function(a){var b,c={},d,h;b=a.controlOptions;d=a.$control.find('[data-type="prev"]');h=a.$control.find('[data-type="next"]');a.$control.data("jplist-datepicker-range-prev",d);a.$control.data("jplist-datepicker-range-next",h);d.off().change(function(){""===jQuery.trim(jQuery(this).val())&&(a.history.addStatus(g(a,!1)),a.observer.trigger(a.observer.events.forceRenderStatusesEvent,[!1]))});h.off().change(function(){""===jQuery.trim(jQuery(this).val())&&(a.history.addStatus(g(a,!1)),
a.observer.trigger(a.observer.events.forceRenderStatusesEvent,[!1]))});c.onSelect=function(b,c){a.history.addStatus(g(a,!1));a.observer.trigger(a.observer.events.forceRenderStatusesEvent,[!1])};b&&(b.datepicker(d,c),b.datepicker(h,c))},g=function(a,b){var c=null,d=c=c=null,h,e,f,g;h=a.$control.data("storage-status");b&&h?c=h:(g=a.$control.attr("data-path").toString(),h=a.$control.attr("data-datetime-format").toString(),e=a.$control.data("jplist-datepicker-range-prev"),f=a.$control.data("jplist-datepicker-range-next"),
b||(c=e.datepicker("getDate"),d=f.datepicker("getDate")),c=new jQuery.fn.jplist.ui.controls.DatePickerRangeFilterDTO(g,h,c,d),c=new jQuery.fn.jplist.app.dto.StatusDTO(a.name,a.action,a.type,c,a.inStorage,a.inAnimation,a.isAnimateToTop,a.inDeepLinking));return c},f=function(a){e(a);return jQuery.extend(this,a)};f.prototype.getStatus=function(a){return g(this,a)};f.prototype.getDeepLink=function(){var a="",b;this.inDeepLinking&&(b=g(this,!1),b.data&&(jQuery.isNumeric(b.data.prev_year)&&(jQuery.isNumeric(b.data.prev_month)&&
jQuery.isNumeric(b.data.prev_day))&&(a+=this.name+this.options.delimiter0+"prev="+b.data.prev_year+this.options.delimiter2+b.data.prev_month+this.options.delimiter2+b.data.prev_day),jQuery.isNumeric(b.data.next_year)&&(jQuery.isNumeric(b.data.next_month)&&jQuery.isNumeric(b.data.next_day))&&(""!==a&&(a+=this.options.delimiter1),a+=this.name+this.options.delimiter0+"next="+b.data.next_year+this.options.delimiter2+b.data.next_month+this.options.delimiter2+b.data.next_day)));return a};f.prototype.getStatusByDeepLink=
function(a,b){var c=null,d;if(this.inDeepLinking&&(c=g(this,!0),c.data))switch(a){case "prev":d=b.split(this.options.delimiter2);3===d.length&&(c.data.prev_year=d[0],c.data.prev_month=d[1],c.data.prev_day=d[2]);break;case "next":d=b.split(this.options.delimiter2),3===d.length&&(c.data.next_year=d[0],c.data.next_month=d[1],c.data.next_day=d[2])}return c};f.prototype.getPaths=function(a){var b;if(b=this.$control.attr("data-path").toString())b=new jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel(b,
"datetime"),a.push(b)};f.prototype.setStatus=function(a,b){var c,d,e;this.inStorage&&b&&this.$control.data("storage-status",a);d=this.$control.data("jplist-datepicker-range-prev");e=this.$control.data("jplist-datepicker-range-next");jQuery.isNumeric(a.data.prev_year)&&jQuery.isNumeric(a.data.prev_month)&&jQuery.isNumeric(a.data.prev_day)?(c=new Date(a.data.prev_year,a.data.prev_month,a.data.prev_day),d.datepicker("setDate",c)):d.val("");jQuery.isNumeric(a.data.next_year)&&jQuery.isNumeric(a.data.next_month)&&
jQuery.isNumeric(a.data.next_day)?(c=new Date(a.data.next_year,a.data.next_month,a.data.next_day),e.datepicker("setDate",c)):e.val("")};jQuery.fn.jplist.ui.controls.DatePickerRangeFilter=function(a){return new f(a)};jQuery.fn.jplist.controlTypes["date-picker-range-filter"]={className:"DatePickerRangeFilter",options:{}}})();(function(){jQuery.fn.jplist.ui.controls.DatePickerRangeFilterDTO=function(e,g,f,a){e={path:e,format:g,filterType:"dateRange",prev_year:"",prev_month:"",prev_day:"",next_year:"",next_month:"",next_day:""};f&&(e.prev_year=f.getFullYear(),e.prev_month=f.getMonth(),e.prev_day=f.getDate());a&&(e.next_year=a.getFullYear(),e.next_month=a.getMonth(),e.next_day=a.getDate());return e}})();
