(function(){"use strict";var add=function(context,commandData){var index,items;if(context&&context.controller&&context.controller.collection){index=context.controller.collection.dataitems.length;if(jQuery.isNumeric(commandData.index)&&commandData.index>=0&&commandData.index<=context.controller.collection.dataitems.length){index=Number(commandData.index)}if(commandData.$item){context.controller.collection.addDataItem(commandData.$item,context.controller.collection.paths,index)}if(commandData.$items){items=commandData.$items;if(jQuery.isArray(commandData.$items)){items=jQuery(commandData.$items).map(function(){return this.toArray()})}context.controller.collection.addDataItems(items,context.controller.collection.paths,index)}context.observer.trigger(context.observer.events.unknownStatusesChanged,[false])}};var del=function(context,commandData){var items;if(context&&context.controller&&context.controller.collection){if(commandData.$item){context.controller.collection.delDataitem(commandData.$item);commandData.$item.remove()}if(commandData.$items){items=commandData.$items;if(jQuery.isArray(commandData.$items)){items=jQuery(commandData.$items).map(function(){return this.toArray()})}context.controller.collection.delDataitems(items);items.remove()}context.observer.trigger(context.observer.events.unknownStatusesChanged,[false])}};var getDataItems=function(context,commandData){var dataitems=null;if(context.options&&context.options.dataSource){switch(context.options.dataSource.type){case"html":{if(context.controller&&context.controller.collection){dataitems=context.controller.collection.dataitems}}break;case"server":{if(context.controller&&context.controller.model&&context.controller.model.dataItem){dataitems=context.controller.model.dataItem}}break}}return dataitems};var initDataSource=function(context){context.options.dataSource=context.options.dataSource||{};context.options.dataSource.type=context.options.dataSource.type||"html";jQuery.fn.jplist.info(context.options,"Data Source Type: ",context.options.dataSource.type);switch(context.options.dataSource.type){case"html":{context.controller=new jQuery.fn.jplist.ui.list.controllers.DOMController(context.$root,context.options,context.observer,context.panel,context.history)}break;case"server":{jQuery.fn.jplist.info(context.options,"Data Source: ",context.options.dataSource);context.controller=new jQuery.fn.jplist.ui.list.controllers.ServerController(context.$root,context.options,context.observer,context.panel,context.history)}break}};var performCommand=function(context,command,commandData){switch(command){case"add":{add(context,commandData)}break;case"del":{del(context,commandData)}break;case"getDataItems":{return getDataItems(context,commandData)}break}};var initEvents=function(context){context.observer.on(context.observer.events.knownStatusesChanged,function(event,statuses){context.controller.renderStatuses(statuses)});context.observer.on(context.observer.events.statusesAppliedToList,function(event,collection,statuses){jQuery.fn.jplist.info(context.options,"panel statusesAppliedToList -> setControlsStatuses: ",statuses);context.panel.setStatuses(statuses);jQuery.fn.jplist.dal.services.DeepLinksService.updateUrlPerControls(context.options,context.panel.getDeepLinksURLPerControls())});context.observer.on(context.observer.events.unknownStatusesChanged,function(event,isDefault){jQuery.fn.jplist.info(context.options,"panel statusesChanged, isDefault: ",isDefault);context.panel.unknownStatusesChanged(isDefault)});context.$root.find(context.options.iosBtnPath).on("click",function(){jQuery(this).next(context.options.panelPath).toggleClass("jplist-ios-show")});context.observer.on(context.observer.events.statusChanged,function(event,status){jQuery.fn.jplist.info(context.options,"panel statusChanged: ",status);context.history.addStatus(status);context.panel.mergeStatuses(status)});context.observer.on(context.observer.events.statusesChangedByDeepLinks,function(event,newStatuses,params){context.panel.statusesChangedByDeepLinks(newStatuses,params)})};var Init=function(userOptions,$root){var context={observer:null,panel:null,controller:null,$root:$root};context.options=jQuery.extend(true,{debug:false,command:"init",commandData:{},itemsBox:".list",itemPath:".list-item",panelPath:".panel",noResults:".jplist-no-results",redrawCallback:"",iosBtnPath:".jplist-ios-button",animateToTop:"html, body",animateToTopDuration:0,effect:"",duration:300,fps:24,storage:"",storageName:"jplist",cookiesExpiration:-1,deepLinking:false,hashStart:"#",delimiter0:":",delimiter1:"|",delimiter2:"~",delimiter3:"!",historyLength:10,dataSource:{type:"html",server:{ajax:{url:"server.php",dataType:"html",type:"POST"},serverOkCallback:null,serverErrorCallback:null},render:null}},userOptions);context.observer=new jQuery.fn.jplist.app.events.PubSub(context.$root,context.options);context.history=new jQuery.fn.jplist.app.History(context.$root,context.options,context.observer);context.panel=new jQuery.fn.jplist.ui.panel.controllers.PanelController($root,context.options,context.history,context.observer);initDataSource(context);initEvents(context);if(context.options.deepLinking){jQuery.fn.jplist.info(context.options,"Deep linking enabled","");context.panel.setStatusesByDeepLink()}else{context.panel.setStatusesFromStorage()}context.observer["trigger"](context.observer.events.init,[]);return jQuery.extend(this,context)};jQuery.fn.jplist=function(userOptions){if(userOptions.command&&userOptions.command!=="init"){var context;context=this.data("jplist");if(context){return performCommand(context,userOptions.command,userOptions.commandData)}}else{return this.each(function(){var context,$root=jQuery(this);context=new Init(userOptions,$root);$root.data("jplist",context)})}}})();jQuery.fn.jplist.controlTypes={};jQuery.fn.jplist.itemControlTypes={};jQuery.fn.jplist.settings={};jQuery.fn.jplist.app=jQuery.fn.jplist.app||{};jQuery.fn.jplist.app.services=jQuery.fn.jplist.app.services||{};jQuery.fn.jplist.app.services.DTOMapperService=jQuery.fn.jplist.app.services.DTOMapperService||{};jQuery.fn.jplist.app.dto=jQuery.fn.jplist.app.dto||{};jQuery.fn.jplist.app.events=jQuery.fn.jplist.app.events||{};jQuery.fn.jplist.domain=jQuery.fn.jplist.domain||{};jQuery.fn.jplist.domain.dom=jQuery.fn.jplist.domain.dom||{};jQuery.fn.jplist.domain.dom.models=jQuery.fn.jplist.domain.dom.models||{};jQuery.fn.jplist.domain.dom.collections=jQuery.fn.jplist.domain.dom.collections||{};jQuery.fn.jplist.domain.dom.services=jQuery.fn.jplist.domain.dom.services||{};jQuery.fn.jplist.domain.dom.services.FiltersService=jQuery.fn.jplist.domain.dom.services.FiltersService||{};jQuery.fn.jplist.domain.dom.services.SortService=jQuery.fn.jplist.domain.dom.services.SortService||{};jQuery.fn.jplist.domain.dom.services.pagination=jQuery.fn.jplist.domain.dom.services.pagination||{};jQuery.fn.jplist.domain.server=jQuery.fn.jplist.domain.server||{};jQuery.fn.jplist.domain.server.models=jQuery.fn.jplist.domain.server.models||{};jQuery.fn.jplist.domain.deeplinks=jQuery.fn.jplist.domain.deeplinks||{};jQuery.fn.jplist.domain.deeplinks.services=jQuery.fn.jplist.domain.deeplinks.services||{};jQuery.fn.jplist.dal=jQuery.fn.jplist.dal||{};jQuery.fn.jplist.dal.services=jQuery.fn.jplist.dal.services||{};jQuery.fn.jplist.ui=jQuery.fn.jplist.ui||{};jQuery.fn.jplist.ui.list=jQuery.fn.jplist.ui.list||{};jQuery.fn.jplist.ui.list.models=jQuery.fn.jplist.ui.list.models||{};jQuery.fn.jplist.ui.list.controllers=jQuery.fn.jplist.ui.list.controllers||{};jQuery.fn.jplist.ui.list.collections=jQuery.fn.jplist.ui.list.collections||{};jQuery.fn.jplist.ui.list.views=jQuery.fn.jplist.ui.list.views||{};jQuery.fn.jplist.ui.controls=jQuery.fn.jplist.ui.controls||{};jQuery.fn.jplist.ui.itemControls=jQuery.fn.jplist.ui.itemControls||{};jQuery.fn.jplist.ui.statuses=jQuery.fn.jplist.ui.statuses||{};jQuery.fn.jplist.ui.panel=jQuery.fn.jplist.ui.panel||{};jQuery.fn.jplist.ui.panel.controllers=jQuery.fn.jplist.ui.panel.controllers||{};jQuery.fn.jplist.ui.panel.collections=jQuery.fn.jplist.ui.panel.collections||{};(function(){"use strict";var getLastStatus=function(context){var lastStatus=null;if(context.statusesQueue.length>0){lastStatus=context.statusesQueue[context.statusesQueue.length-1]}return lastStatus};var addStatus=function(context,status){context.statusesQueue.push(status);if(context.statusesQueue.length>context.options.historyLength){context.statusesQueue.shift()}};var popStatus=function(context){var status=null;if(context.statusesQueue.length>0){status=context.statusesQueue.pop()}return status};var getLastList=function(context){var lastList=null;if(context.listStatusesQueue.length>0){lastList=context.listStatusesQueue[context.listStatusesQueue.length-1]}return lastList};var addList=function(context,list){context.listStatusesQueue.push(list);if(context.listStatusesQueue.length>context.options.historyLength){context.listStatusesQueue.shift()}};var popList=function(context){var list=null;if(context.listStatusesQueue.length>0){list=context.listStatusesQueue.pop()}return list};jQuery.fn.jplist.app.History=function($root,options,observer){this.options=options;this.observer=observer;this.$root=$root;this.statusesQueue=[];this.listStatusesQueue=[]};jQuery.fn.jplist.app.History.prototype.addStatus=function(status){addStatus(this,status)};jQuery.fn.jplist.app.History.prototype.getLastStatus=function(){return getLastStatus(this)};jQuery.fn.jplist.app.History.prototype.popStatus=function(){return popStatus(this)};jQuery.fn.jplist.app.History.prototype.getLastList=function(){return getLastList(this)};jQuery.fn.jplist.app.History.prototype.addList=function(list){addList(this,list)};jQuery.fn.jplist.app.History.prototype.popList=function(){return popList(this)}})();(function(){"use strict";var getStatusesByFieldAndValue=function(context,statuses,field,value){var resultStatuses=[],status;for(var i=0;i<context.statuses.length;i++){status=context.statuses[i];if(status[field]===value){status.initialIndex=i;resultStatuses.push(status)}}return resultStatuses};var getStatusesByAction=function(context,action){var resultStatuses=[],status;for(var i=0;i<context.statuses.length;i++){status=context.statuses[i];if(status.action===action){resultStatuses.push(status)}}return resultStatuses};var get=function(context,index){var status=null;if(index>=0&&index<context.statuses.length){status=context.statuses[index]}return status};var add=function(context,status,force){var currentStatus,mergedStatus,shouldWarn,statusesWithTheSameAction,statusesWithTheSameActionAndName,warnProperties;if(context.statuses.length===0){context.statuses.push(status)}else{statusesWithTheSameAction=getStatusesByFieldAndValue(context,context.statuses,"action",status.action);if(statusesWithTheSameAction.length===0){context.statuses.push(status)}else{statusesWithTheSameActionAndName=getStatusesByFieldAndValue(context,statusesWithTheSameAction,"name",status.name);if(statusesWithTheSameActionAndName.length===0){context.statuses.push(status)}else{for(var i=0;i<statusesWithTheSameActionAndName.length;i++){currentStatus=statusesWithTheSameActionAndName[i];if(currentStatus.type===status.type){if(force){context.statuses[currentStatus.initialIndex]=status}else{if(currentStatus.data&&status.data){shouldWarn=false;warnProperties=[];jQuery.each(currentStatus.data,function(property,value){if(status[property]!==value){shouldWarn=true;warnProperties.push(property+": "+status[property]+" !== "+value)}});if(shouldWarn){jQuery.fn.jplist.warn(context.options,"The statuses have the same name, action and type, but different data values",[currentStatus,status,warnProperties])}}}}else{context.statuses[currentStatus.initialIndex]=jQuery.extend(true,{},currentStatus,status);context.statuses[currentStatus.initialIndex].type="combined"}}}}}};var toArray=function(context){return context.statuses};var getSortStatuses=function(context){var actionStatuses,actionStatus,statusesAfterGroupExpanding=[],tempStatus;actionStatuses=getStatusesByAction(context,"sort");if(jQuery.isArray(actionStatuses)){for(var i=0;i<actionStatuses.length;i++){actionStatus=actionStatuses[i];if(actionStatus&&actionStatus.data&&actionStatus.data["sortGroup"]&&jQuery.isArray(actionStatus.data["sortGroup"])&&actionStatus.data["sortGroup"].length>0){for(var j=0;j<actionStatus.data["sortGroup"].length;j++){tempStatus=new jQuery.fn.jplist.app.dto.StatusDTO(actionStatus.name,actionStatus.action,actionStatus.type,actionStatus.data["sortGroup"][j],actionStatus.inStorage,actionStatus.inAnimation,actionStatus.isAnimateToTop,actionStatus.inDeepLinking);statusesAfterGroupExpanding.push(tempStatus)}}else{statusesAfterGroupExpanding.push(actionStatus)}}}return statusesAfterGroupExpanding};var splitToGroupsByProperty=function(statuses,property){var groups={},status,value;for(var i=0;i<statuses.length;i++){status=statuses[i];value=status[property];if(!groups[value]){groups[value]=[]}groups[value].push(status)}return groups};var getFilterStatuses=function(context){var filterStatuses,status,filterService,registeredFilterStatuses=[];filterStatuses=getStatusesByAction(context,"filter");if(jQuery.isArray(filterStatuses)){for(var i=0;i<filterStatuses.length;i++){status=filterStatuses[i];if(status&&status.data&&status.data.filterType){filterService=jQuery.fn.jplist.app.services.DTOMapperService.filters[status.data.filterType];if(jQuery.isFunction(filterService)){registeredFilterStatuses.push(status)}}}}return registeredFilterStatuses};jQuery.fn.jplist.app.dto.StatusesDTOCollection=function(options,observer,statuses){this.options=options;this.observer=observer;this.statuses=statuses||[]};jQuery.fn.jplist.app.dto.StatusesDTOCollection.prototype.getStatusesByAction=function(action){return getStatusesByAction(this,action)};jQuery.fn.jplist.app.dto.StatusesDTOCollection.prototype.add=function(status,force){return add(this,status,force)};jQuery.fn.jplist.app.dto.StatusesDTOCollection.prototype.get=function(index){return get(this,index)};jQuery.fn.jplist.app.dto.StatusesDTOCollection.prototype.toArray=function(){return toArray(this)};jQuery.fn.jplist.app.dto.StatusesDTOCollection.prototype.getSortStatuses=function(){return getSortStatuses(this)};jQuery.fn.jplist.app.dto.StatusesDTOCollection.prototype.getFilterStatuses=function(){return getFilterStatuses(this)}})();(function(){"use strict";jQuery.fn.jplist.app.dto.StatusDTO=function(name,action,type,data,inStorage,inAnimation,isAnimateToTop,inDeepLinking){this.action=action;this.name=name;this.type=type;this.data=data;this.inStorage=inStorage;this.inAnimation=inAnimation;this.isAnimateToTop=isAnimateToTop;this.inDeepLinking=inDeepLinking}})();(function(){"use strict";jQuery.fn.jplist.app.events.PubSub=function($root,options){var context={options:options,$root:$root,events:{}};context.events={init:"1",unknownStatusesChanged:"2",knownStatusesChanged:"3",statusChanged:"4",statusesChangedByDeepLinks:"5",listSorted:"6",listFiltered:"7",listPaginated:"8",dataItemAdded:"9",dataItemRemoved:"10",collectionReadyEvent:"11",statusesAppliedToList:"12",animationStartEvent:"13",animationStepEvent:"14",animationCompleteEvent:"15"};return jQuery.extend(true,jQuery({}),this,context)}})();(function(){"use strict";jQuery.fn.jplist.app.services.DTOMapperService.filters={};jQuery.fn.jplist.app.services.DTOMapperService.filters.TextFilter=function(status,dataview){var path=new jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel(status.data.path,null);return jQuery.fn.jplist.domain.dom.services.FiltersService.textFilter(status.data.value,path,dataview,status.data.ignore,status.data.mode)};jQuery.fn.jplist.app.services.DTOMapperService.filters.path=function(status,dataview){var path=new jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel(status.data.path,null);return jQuery.fn.jplist.domain.dom.services.FiltersService.pathFilter(path,dataview)};jQuery.fn.jplist.app.services.DTOMapperService.filters.range=function(status,dataview){var path=new jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel(status.data.path,null);return jQuery.fn.jplist.domain.dom.services.FiltersService.rangeFilter(path,dataview,status.data.min,status.data.max,status.data.prev,status.data.next)};jQuery.fn.jplist.app.services.DTOMapperService.filters.date=function(status,dataview){var path=new jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel(status.data.path,null);return jQuery.fn.jplist.domain.dom.services.FiltersService.dateFilter(status.data["year"],status.data["month"],status.data["day"],path,dataview,status.data["format"])};jQuery.fn.jplist.app.services.DTOMapperService.filters.dateRange=function(status,dataview){var path=new jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel(status.data.path,null);return jQuery.fn.jplist.domain.dom.services.FiltersService.dateRangeFilter(path,dataview,status.data["format"],status.data["prev_year"],status.data["prev_month"],status.data["prev_day"],status.data["next_year"],status.data["next_month"],status.data["next_day"])};jQuery.fn.jplist.app.services.DTOMapperService.filters.pathGroup=function(status,dataview){return jQuery.fn.jplist.domain.dom.services.FiltersService.pathGroupFilter(status.data.pathGroup,dataview)};jQuery.fn.jplist.app.services.DTOMapperService.filters.textGroup=function(status,dataview){return jQuery.fn.jplist.domain.dom.services.FiltersService.textGroupFilter(status.data["textGroup"],status.data["logic"],status.data["path"],status.data["ignoreRegex"],dataview,status.data["mode"])};jQuery.fn.jplist.app.services.DTOMapperService.filters.textFilterPathGroup=function(status,dataview){return jQuery.fn.jplist.domain.dom.services.FiltersService.textFilterPathGroup(status.data["textAndPathsGroup"],status.data["ignoreRegex"],dataview,status.data["mode"])};jQuery.fn.jplist.app.services.DTOMapperService.sort={};jQuery.fn.jplist.app.services.DTOMapperService.sort.text=function(status,dataitem1,dataitem2){var path=new jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel(status.data.path,status.data.type);return jQuery.fn.jplist.domain.dom.services.SortService.textHelper(dataitem1,dataitem2,status.data.order,path,status.data.ignore||"")};jQuery.fn.jplist.app.services.DTOMapperService.sort.number=function(status,dataitem1,dataitem2){var path=new jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel(status.data.path,status.data.type);return jQuery.fn.jplist.domain.dom.services.SortService.numbersHelper(dataitem1,dataitem2,status.data.order,path)};jQuery.fn.jplist.app.services.DTOMapperService.sort.datetime=function(status,dataitem1,dataitem2){var path=new jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel(status.data.path,status.data.type);return jQuery.fn.jplist.domain.dom.services.SortService.datetimeHelper(dataitem1,dataitem2,status.data.order,path,status.data.dateTimeFormat||"")}})();(function(){"use strict";jQuery.fn.jplist.logEnabled=function(options){return options.debug&&window.console&&jQuery.isFunction(window.console.log)};jQuery.fn.jplist.log=function(options,msg,item){if(jQuery.fn.jplist.logEnabled(options)){window.console.log(msg,item)}};jQuery.fn.jplist.info=function(options,msg,item){if(jQuery.fn.jplist.logEnabled(options)){window.console.info(msg,item)}};jQuery.fn.jplist.error=function(options,msg,item){if(jQuery.fn.jplist.logEnabled(options)){window.console.error(msg,item)}};jQuery.fn.jplist.warn=function(options,msg,item){if(jQuery.fn.jplist.logEnabled(options)){window.console.warn(msg,item)}}})();(function(){"use strict";jQuery.fn.jplist.dal.services.CookiesService={};jQuery.fn.jplist.dal.services.CookiesService.setCookie=function(name,value,expiration){var cValue=escape(value),exdate=new Date;expiration=Number(expiration);if(expiration==-1||isNaN(expiration)){document.cookie=name+"="+cValue+";path=/;"}else{exdate.setMinutes(exdate.getMinutes()+expiration);document.cookie=name+"="+cValue+";path=/; expires="+exdate.toUTCString()}};jQuery.fn.jplist.dal.services.CookiesService.getCookie=function(cookieName){var x,y,cookies,resultCookie=null;cookies=document.cookie.split(";");for(var i=0;i<cookies.length;i++){x=cookies[i].substr(0,cookies[i].indexOf("="));y=cookies[i].substr(cookies[i].indexOf("=")+1);x=x.replace(/^\s+|\s+$/g,"");if(x==cookieName){resultCookie=unescape(y);break}}return resultCookie};jQuery.fn.jplist.dal.services.CookiesService.saveCookies=function(statuses,cookieName,expiration){var json;json=JSON.stringify(statuses);jQuery.fn.jplist.dal.services.CookiesService.setCookie(cookieName,json,expiration)};jQuery.fn.jplist.dal.services.CookiesService.restoreCookies=function(cookieName){var json,statuses=[];json=jQuery.fn.jplist.dal.services.CookiesService.getCookie(cookieName);if(json){statuses=jQuery.parseJSON(json)}if(!statuses){statuses=[]}return statuses}})();(function(){"use strict";var replaceHash=function(options,hash){var hashStr=jQuery.trim(hash.replace(options.hashStart,"")),href,index;if(hashStr===""){hashStr=options.hashStart}else{hashStr=options.hashStart+hashStr}if(window.location.hash!==hashStr){index=window.location.href.indexOf(options.hashStart);if(index==-1){href=window.location.href+hashStr}else{href=window.location.href.substring(0,index)+hashStr}if("replaceState"in window.history){window.history.replaceState("","",href)}else{window.location.replace(href)}}};jQuery.fn.jplist.dal.services.DeepLinksService={};jQuery.fn.jplist.dal.services.DeepLinksService.getUrlParams=function(options){var sections=[],section,params=[],param,pairSections,keySections,key,value,hash;hash=window.decodeURIComponent(jQuery.trim(window.location.hash.replace(options.hashStart,"")));if(options.deepLinking&&jQuery.trim(hash)!==""){sections=hash.split(options.delimiter1);for(var i=0;i<sections.length;i++){section=sections[i];pairSections=section.split("=");if(pairSections.length===2){key=pairSections[0];value=pairSections[1];keySections=key.split(options.delimiter0);if(keySections.length===2){param={controlName:keySections[0],propName:keySections[1],propValue:value};params.push(param)}}}}return params};jQuery.fn.jplist.dal.services.DeepLinksService.updateUrlPerControls=function(options,deepLinkUrl){if(options.deepLinking){jQuery.fn.jplist.info(options,"Change Deep links URL according to statuses: ",deepLinkUrl);replaceHash(options,deepLinkUrl)}}})();(function(){"use strict";jQuery.fn.jplist.dal.services.LocalStorageService={};jQuery.fn.jplist.dal.services.LocalStorageService.supported=function(){try{return"localStorage"in window&&window["localStorage"]!==null}catch(e){return false}};jQuery.fn.jplist.dal.services.LocalStorageService.save=function(statuses,storageName){var json;json=JSON.stringify(statuses);window.localStorage[storageName]=json};jQuery.fn.jplist.dal.services.LocalStorageService.restore=function(storageName){var json,statuses=[];json=window.localStorage[storageName];if(json){statuses=jQuery.parseJSON(json)}if(!statuses){statuses=[]}return statuses}})();(function(){"use strict";jQuery.fn.jplist.dal.services.URIService={};jQuery.fn.jplist.dal.services.URIService.get=function(statuses,options,okCallback,errorCallback,alwaysCallback){var serverOptions=options.dataSource.server;if(!serverOptions.ajax.data){serverOptions.ajax.data={}}serverOptions.ajax.data.statuses=encodeURIComponent(JSON.stringify(statuses,function(key,value){if(value&&value.nodeType){return null}return value}));jQuery.ajax(serverOptions.ajax).done(function(serverData,ajax,response){if(jQuery.isFunction(okCallback)){okCallback(serverData,statuses,ajax,response)}if(jQuery.isFunction(serverOptions.serverOkCallback)){serverOptions.serverOkCallback(serverData,statuses,ajax,response)}}).fail(function(){if(jQuery.isFunction(errorCallback)){errorCallback(statuses)}if(jQuery.isFunction(serverOptions.serverErrorCallback)){serverOptions.serverErrorCallback(statuses)}}).always(function(){if(jQuery.isFunction(alwaysCallback)){alwaysCallback(statuses)}})}})();(function(){"use strict";var isPathInList=function(context,path){var cpath,isInList=false,PATH_ONLY=true;for(var i=0;i<context.paths.length;i++){cpath=context.paths[i];if(cpath.isEqual(path,PATH_ONLY)){isInList=true;break}}return isInList};var add=function(context,path){if(!isPathInList(context,path)){context.paths.push(path)}};var addRange=function(context,paths){for(var i=0;i<paths.length;i++){add(context,paths[i])}};jQuery.fn.jplist.domain.dom.collections.DataItemMemberPathCollection=function(options,observer){this.options=options;this.observer=observer;this.paths=[]};jQuery.fn.jplist.domain.dom.collections.DataItemMemberPathCollection.prototype.add=function(path){add(this,path)};jQuery.fn.jplist.domain.dom.collections.DataItemMemberPathCollection.prototype.addRange=function(paths){addRange(this,paths)};jQuery.fn.jplist.domain.dom.collections.DataItemMemberPathCollection.prototype.isPathInList=function(path){return isPathInList(this,path)}})();(function(){"use strict";var filter=function(context,statuses){var filterStatuses,status,statusesCollection,filterService;statusesCollection=new jQuery.fn.jplist.app.dto.StatusesDTOCollection(context.options,context.observer,statuses);filterStatuses=statusesCollection.getFilterStatuses();if(filterStatuses.length>0){for(var i=0;i<filterStatuses.length;i++){status=filterStatuses[i];filterService=jQuery.fn.jplist.app.services.DTOMapperService.filters[status.data.filterType];context.dataview=filterService(status,context.dataview)}context.observer.trigger(context.observer.events.listFiltered,[statuses,context])}};var pagination=function(context,statuses){var actionStatuses,paging=null,status,currentPage,statusesCollection;statusesCollection=new jQuery.fn.jplist.app.dto.StatusesDTOCollection(context.options,context.observer,statuses);actionStatuses=statusesCollection["getStatusesByAction"]("paging",statuses);if(actionStatuses.length>0){for(var i=0;i<actionStatuses.length;i++){status=actionStatuses[i];currentPage=status.data.currentPage||0;paging=new jQuery.fn.jplist.domain.dom.services.PaginationService(currentPage,status.data.number,context.dataview.length);actionStatuses[i].data.paging=paging;context.dataview=jQuery.fn.jplist.domain.dom.services.FiltersService.pagerFilter(paging,context.dataview)}context.observer.trigger(context.observer.events.listPaginated,[statuses,context])}};var sort=function(context,statuses){var sortStatuses=[],statusesCollection;statusesCollection=new jQuery.fn.jplist.app.dto.StatusesDTOCollection(context.options,context.observer,statuses);sortStatuses=statusesCollection.getSortStatuses();if(sortStatuses.length>0){jQuery.fn.jplist.domain.dom.services.SortService.doubleSort(sortStatuses,context.dataview);context.observer.trigger(context.observer.events.listSorted,[statuses,context])}};var applyStatuses=function(context,statuses){resetDataview(context);sort(context,statuses);filter(context,statuses);pagination(context,statuses);context.observer.trigger(context.observer.events.statusesAppliedToList,[context,statuses])};var dataviewToString=function(context){var dataitem,html="",i;for(i=0;i<context.dataview.length;i++){dataitem=context.dataview[i];html+=dataitem.content}return html};var dataviewToJqueryObject=function(context){return jQuery(context.dataview).map(function(index,$element){return $element.jqElement.get()})};var dataitemsToJqueryObject=function(context){return jQuery(context.dataitems).map(function(index,$element){return $element.jqElement.get()})};var resetDataview=function(context){context.dataview=jQuery.merge([],context.dataitems)};var indexOf=function(context,item){var dataitem,index=-1,html1,html2;for(var i=0;i<context.dataitems.length;i++){dataitem=context.dataitems[i];html1=jQuery.fn.jplist.domain.dom.services.HelperService.getOuterHtml(dataitem.jqElement);html2=jQuery.fn.jplist.domain.dom.services.HelperService.getOuterHtml(item);if(html1===html2){index=i;break}}return index};var delDataitem=function(context,$item){var index;index=indexOf(context,$item);if(index!==-1){context.dataitems.splice(index,1);context.observer.trigger(context.observer.events.dataItemRemoved,[$item,context.dataitems])}};var delDataitems=function(context,$items){$items.each(function(){delDataitem(context,jQuery(this))})};var addDataItem=function(context,$item,paths,index){var dataItem;dataItem=new jQuery.fn.jplist.domain.dom.models.DataItemModel($item,paths,index);context.dataitems.splice(index,0,dataItem);context.observer.trigger(context.observer.events.dataItemAdded,[dataItem,context.dataitems])};var addDataItemsHelper=function(context,$items,i,paths,index){var $item,TEXT_NODE=3;for(;i<$items.length;i++){$item=$items.eq(i);if($item.get(0).nodeType!==TEXT_NODE){addDataItem(context,$item,paths,index);if(i+1<$items.length&&i%50===0){window.setTimeout(function(){addDataItemsHelper(context,$items,i,paths,index)},0)}}}};var addDataItems=function(context,$items,paths,index){addDataItemsHelper(context,$items,0,paths,index);resetDataview(context)};var empty=function(context){context.dataitems=[];context.dataview=[]};jQuery.fn.jplist.domain.dom.collections.DataItemsCollection=function(options,observer,$items,paths){this.dataitems=[];this.dataview=[];this.options=options;this.observer=observer;this.paths=paths;if($items.length>0){addDataItems(this,$items,paths,0)}this.observer.trigger(this.observer.events.collectionReadyEvent,[this])};jQuery.fn.jplist.domain.dom.collections.DataItemsCollection.prototype.applyStatuses=function(statuses){applyStatuses(this,statuses)};jQuery.fn.jplist.domain.dom.collections.DataItemsCollection.prototype.filter=function(statuses){filter(this,statuses)};jQuery.fn.jplist.domain.dom.collections.DataItemsCollection.prototype.sort=function(statuses){sort(this,statuses)};jQuery.fn.jplist.domain.dom.collections.DataItemsCollection.prototype.pagination=function(statuses){pagination(this,statuses)};jQuery.fn.jplist.domain.dom.collections.DataItemsCollection.prototype.dataviewToJqueryObject=function(){return dataviewToJqueryObject(this)};jQuery.fn.jplist.domain.dom.collections.DataItemsCollection.prototype.dataitemsToJqueryObject=function(){return dataitemsToJqueryObject(this)};jQuery.fn.jplist.domain.dom.collections.DataItemsCollection.prototype.resetDataview=function(){resetDataview(this)};jQuery.fn.jplist.domain.dom.collections.DataItemsCollection.prototype.empty=function(){empty(this)};jQuery.fn.jplist.domain.dom.collections.DataItemsCollection.prototype.addDataItem=function(item,paths,index){addDataItem(this,item,paths,index)};jQuery.fn.jplist.domain.dom.collections.DataItemsCollection.prototype.addDataItems=function(items,paths,index){addDataItems(this,items,paths,index)};jQuery.fn.jplist.domain.dom.collections.DataItemsCollection.prototype.delDataitem=function(item){delDataitem(this,item)};jQuery.fn.jplist.domain.dom.collections.DataItemsCollection.prototype.delDataitems=function(items){delDataitems(this,items)};jQuery.fn.jplist.domain.dom.collections.DataItemsCollection.prototype.indexOf=function(item){return indexOf(this,item)};jQuery.fn.jplist.domain.dom.collections.DataItemsCollection.prototype.dataviewToString=function(){return dataviewToString(this)}})();(function(){"use strict";jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel=function(jqPath,dataType){this.jqPath=jqPath;this.dataType=dataType};jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel.prototype.isEqual=function(path,pathOnly){var isEqual=false;if(pathOnly){if(this.jqPath===path.jqPath){isEqual=true}}else{if(this.jqPath===path.jqPath&&this.dataType===path.dataType){isEqual=true}}return isEqual}})();(function(){"use strict";jQuery.fn.jplist.domain.dom.models.DataItemMemberModel=function($element,path){this.$element=$element;this.path=path;this.text=$element.text();this.html=$element.html()}})();(function(){"use strict";var findPathitem=function(context,path){var resultPathitem=null,pathitem,PATH_ONLY=true;for(var i=0;i<context.pathitems.length;i++){pathitem=context.pathitems[i];if(pathitem.path.isEqual(path,PATH_ONLY)){resultPathitem=pathitem;break}}return resultPathitem};var getPathitems=function(context,paths){var path,pathitem,$element,pathitems=[];
for(var i=0;i<paths.length;i++){path=paths[i];$element=context.$item.find(path.jqPath);if($element.length>0){pathitem=new jQuery.fn.jplist.domain.dom.models.DataItemMemberModel($element,path);pathitems.push(pathitem)}}return pathitems};jQuery.fn.jplist.domain.dom.models.DataItemModel=function($item,paths,index){this.pathitems=[];this.$item=$item;this.jqElement=$item;this.index=index;this.html=jQuery.fn.jplist.domain.dom.services.HelperService.getOuterHtml($item);this.pathitems=getPathitems(this,paths)};jQuery.fn.jplist.domain.dom.models.DataItemModel.prototype.findPathitem=function(path){return findPathitem(this,path)}})();(function(){"use strict";var formatTryParse=function(wilcard,value){var radix=10,result=null;if(wilcard=="{month}"){value=value.toLowerCase();if(value==="january"||value==="jan"||value==="jan."){result=0}if(value==="february"||value==="feb"||value==="feb."){result=1}if(value==="march"||value==="mar"||value==="mar."){result=2}if(value=="april"||value==="apr"||value==="apr."){result=3}if(value==="may"){result=4}if(value=="july"||value==="jun"||value==="jun."){result=5}if(value==="april"||value==="jul"||value==="jul."){result=6}if(value==="august"||value==="aug"||value==="aug."){result=7}if(value==="september"||value==="sep"||value==="sep."){result=8}if(value==="october"||value==="oct"||value==="oct."){result=9}if(value==="november"||value==="nov"||value==="nov."){result=10}if(value==="december"||value==="dec"||value==="dec."){result=11}if(result===null){result=parseInt(value,radix);if(!isNaN(result)){result--}}}else{result=parseInt(value,radix)}return result};var getDatetimeFormatItem=function(replacedFormat,datetimeString){var regex,regexValue,match,result=null;regexValue=replacedFormat.replace(/{year}|{month}|{day}|{hour}|{min}|{sec}/g,".*");regex=new RegExp(regexValue,"g");match=regex.exec(datetimeString);if(match&&match.length>1){result=match[1]}return result};jQuery.fn.jplist.domain.dom.services.HelperService={};jQuery.fn.jplist.domain.dom.services.HelperService.getOuterHtml=function(el){var html="",attr,inner,name;if(el&&el[0]&&el[0].tagName){attr=el[0].attributes;inner=el.html();name=el[0].tagName.toString().toLowerCase();html+="<"+name;for(var i=0;i<attr.length;i++){if(attr[i].nodeValue){html+=" "+attr[i].nodeName+"=";html+='"'+attr[i].nodeValue+'"'}}html+=">";html+=inner;html+="</"+name+">"}return html};jQuery.fn.jplist.domain.dom.services.HelperService.removeCharacters=function(text,regex){var regexExpr;if(!text){return""}regexExpr=new RegExp(regex,"ig");return text.replace(regexExpr,"").toLowerCase()};jQuery.fn.jplist.domain.dom.services.HelperService.formatDateTime=function(datetime,format){var formattedDatetime,replacedFormat,year,month,day,hour,minute,second;format=format.replace(/\./g,"\\.");format=format.replace(/\(/g,"\\(");format=format.replace(/\)/g,"\\)");format=format.replace(/\[/g,"\\[");format=format.replace(/\]/g,"\\]");replacedFormat=format.replace("{year}","(.*)");year=getDatetimeFormatItem(replacedFormat,datetime);if(year){year=formatTryParse("{year}",year)}replacedFormat=format.replace("{day}","(.*)");day=getDatetimeFormatItem(replacedFormat,datetime);if(day){day=formatTryParse("{day}",day)}replacedFormat=format.replace("{month}","(.*)");month=getDatetimeFormatItem(replacedFormat,datetime);if(month){month=formatTryParse("{month}",month)}replacedFormat=format.replace("{hour}","(.*)");hour=getDatetimeFormatItem(replacedFormat,datetime);if(hour){hour=formatTryParse("{hour}",hour)}replacedFormat=format.replace("{min}","(.*)");minute=getDatetimeFormatItem(replacedFormat,datetime);if(minute){minute=formatTryParse("{min}",minute)}replacedFormat=format.replace("{sec}","(.*)");second=getDatetimeFormatItem(replacedFormat,datetime);if(second){second=formatTryParse("{sec}",second)}if(!year||isNaN(year)){year=1900}if(!month||isNaN(month)){month=0}if(!day||isNaN(day)){day=1}if(!hour||isNaN(hour)){hour=0}if(!minute||isNaN(minute)){minute=0}if(!second||isNaN(second)){second=0}formattedDatetime=new Date(year,month,day,hour,minute,second);return formattedDatetime}})();(function(){"use strict";jQuery.fn.jplist.domain.server.models.DataItemModel=function(content,dataType,responseText){var $content;this.content="";this.dataType=dataType;this.count=0;this.responseText=responseText;if(!this.dataType){this.dataType="html"}switch(this.dataType){case"html":{$content=jQuery(content);if($content.length>0){this.content=$content.html();this.count=Number($content.attr("data-count"))||0}}break;case"json":{this.content=content["data"];this.count=content["count"]}break;case"xml":{$content=jQuery(content).find("root");this.count=Number($content.attr("count"))||0;if(this.count>0){this.content=content}else{this.content=""}}break}}})();(function(){"use strict";jQuery.fn.jplist.animation={};jQuery.fn.jplist.animation.drawItems=function(options,$itemsBox,$dataitems,$dataview,effect,timeline,endCallback,observer){var effectClass,beforeMethod,afterMethod,effectMethod;effectClass=jQuery.fn.jplist.animation[effect];if(effectClass){beforeMethod=effectClass["before"];effectMethod=effectClass["effect"];afterMethod=effectClass["after"];if(jQuery.isFunction(beforeMethod)){beforeMethod(options,$itemsBox,$dataitems,$dataview)}if(jQuery.isFunction(effectMethod)){observer.on(observer.events.animationStepEvent,function(e,progress,data){effectMethod(options,$itemsBox,$dataitems,$dataview,progress)})}observer.on(observer.events.animationCompleteEvent,function(e){if(jQuery.isFunction(afterMethod)){afterMethod(options,$itemsBox,$dataitems,$dataview)}observer.off(observer.events.animationStepEvent);observer.off(observer.events.animationCompleteEvent);if(jQuery.isFunction(endCallback)){endCallback()}});timeline.play(options.duration)}else{if(jQuery.isFunction(endCallback)){endCallback()}}}})();(function(){"use strict";var stop=function(context){if(context.handler){window.clearTimeout(context.handler)}context.progress=0;context.start=null;context.observer.trigger(context.observer.events.animationCompleteEvent,[])};var play=function(context,duration){if(jQuery.isNumeric(duration)&&duration>0){context.handler=window.setTimeout(function(){var timePassed;if(context.start===null){context.observer.trigger(context.observer.events.animationStartEvent,[]);context.start=(new Date).getTime()}timePassed=(new Date).getTime()-context.start;context.progress=timePassed/duration;if(context.progress>=1){context.progress=1}context.observer.trigger(context.observer.events.animationStepEvent,[context.progress*100,context]);if(context.progress<1){play(context,duration)}else{stop(context)}},context.delay)}else{stop(context)}};jQuery.fn.jplist.animation.Timeline=function($scene,options,observer){this.$scene=$scene;this.options=options;this.observer=observer;this.start=null;this.progress=0;this.delay=null;this.handler=null;this.delay=1e3/this.options.fps};jQuery.fn.jplist.animation.Timeline.prototype.play=function(duration){play(this,duration)};jQuery.fn.jplist.animation.Timeline.prototype.stop=function(){stop(this)}})();(function(){"use strict";var getControlProperties=function(context,$control){var temp,type,inDeepLinking,inStorage,inAnimation,isAnimateToTop,controlType,controlTypeClass,controlOptions;type=$control.attr("data-control-type");inDeepLinking=true;inStorage=true;inAnimation=true;isAnimateToTop=false;controlType=null;controlTypeClass=null;controlOptions=null;temp=$control.attr("data-control-deep-link");if(temp&&temp.toString()==="false"){inDeepLinking=false}temp=$control.attr("data-control-storage");if(temp&&temp.toString()==="false"){inStorage=false}temp=$control.attr("data-control-animation");if(temp&&temp.toString()==="false"){inAnimation=false}temp=$control.attr("data-control-animate-to-top");if(temp&&temp.toString()==="true"){isAnimateToTop=true}controlType={};if(jQuery.fn.jplist.controlTypes[type]){controlType=jQuery.extend(true,{},controlType,jQuery.fn.jplist.controlTypes[type])}if(context.options.controlTypes&&context.options.controlTypes[type]){controlType=jQuery.extend(true,{},controlType,context.options.controlTypes[type])}if(controlType){if(controlType["className"]){controlTypeClass=jQuery.fn.jplist.ui.controls[controlType["className"]]}if(controlType["options"]){controlOptions=controlType["options"]}}return{type:type,action:$control.attr("data-control-action"),name:$control.attr("data-control-name"),inDeepLinking:inDeepLinking,inStorage:inStorage,inAnimation:inAnimation,isAnimateToTop:isAnimateToTop,controlType:controlType,controlTypeClass:controlTypeClass,controlOptions:controlOptions,paths:[]}};var create=function(context,$control,controlsCollection){var control=null,properties;properties=getControlProperties(context,$control);properties=jQuery.extend(true,properties,{$control:$control,history:context.history,observer:context.observer,options:context.options,$root:context.$root,controlsCollection:controlsCollection});if(properties.controlTypeClass&&jQuery.isFunction(properties.controlTypeClass)){control=new properties.controlTypeClass(properties)}return control};jQuery.fn.jplist.ui.panel.ControlFactory=function(options,observer,history,$root){this.options=options;this.observer=observer;this.history=history;this.$root=$root};jQuery.fn.jplist.ui.panel.ControlFactory.prototype.create=function($control,controlsCollection){return create(this,$control,controlsCollection)};jQuery.fn.jplist.ui.panel.ControlFactory.prototype.getStatus=function(isDefault){return null};jQuery.fn.jplist.ui.panel.ControlFactory.prototype.setStatus=function(status,restoredFromStorage){};jQuery.fn.jplist.ui.panel.ControlFactory.prototype.getDeepLink=function(){return""};jQuery.fn.jplist.ui.panel.ControlFactory.prototype.getStatusByDeepLink=function(propName,propValue){return null};jQuery.fn.jplist.ui.panel.ControlFactory.prototype.getPaths=function(paths){return[]};jQuery.fn.jplist.ui.panel.ControlFactory.prototype.setByDeepLink=function(params){}})();(function(){"use strict";var findControlsByName=function(context,name){var sameControls=[],control;for(var i=0;i<context.controls.length;i++){control=context.controls[i];if(control.name===name){sameControls.push(control)}}return sameControls};var findControlsByNameAction=function(context,name,action){var sameControls=[],control;for(var i=0;i<context.controls.length;i++){control=context.controls[i];if(control.name===name&&control.action===action){sameControls.push(control)}}return sameControls};var statusesChangedByDeepLinks=function(context,params){var control;for(var i=0;i<context.controls.length;i++){control=context.controls[i];if(jQuery.isFunction(control["setByDeepLink"])){control["setByDeepLink"](params)}}};var setDeepLinks=function(context,params){var param,controlsWithSameName,control,status,statusesByDeepLinkCollection=new jQuery.fn.jplist.app.dto.StatusesDTOCollection(context.options,context.observer,[]),isDefault=false,i;for(i=0;i<params.length;i++){param=params[i];controlsWithSameName=findControlsByName(context,param.controlName);for(var j=0;j<controlsWithSameName.length;j++){control=controlsWithSameName[j];if(jQuery.isFunction(control.getStatusByDeepLink)){status=control["getStatusByDeepLink"](param.propName,param.propValue);if(status){statusesByDeepLinkCollection.add(status,false)}}}}context.observer.trigger(context.observer.events.knownStatusesChanged,[statusesByDeepLinkCollection.toArray()]);context.observer.trigger(context.observer.events.statusesChangedByDeepLinks,[,statusesByDeepLinkCollection.toArray(),params])};var setStatuses=function(context,statuses,isStorage){var status,sameControls;for(var i=0;i<statuses.length;i++){status=statuses[i];sameControls=findControlsByNameAction(context,status.name,status.action);for(var k=0;k<sameControls.length;k++){if(jQuery.isFunction(sameControls[k].setStatus)){sameControls[k]["setStatus"](status,isStorage)}}}};var getDeepLinksUrl=function(context){var control,url="",deepLinksArr=[],deepLink="",controls;controls=context.controls;for(var i=0;i<controls.length;i++){control=controls[i];if(jQuery.isFunction(control.getDeepLink)){deepLink=jQuery.trim(control["getDeepLink"]())}if(deepLink!==""&&jQuery.inArray(deepLink,deepLinksArr)===-1){deepLinksArr.push(deepLink)}}url=deepLinksArr.join(context.options.delimiter1);return url};var getStatuses=function(context,isDefault){var statuses,control,status,index,sameNameStatus;statuses=new jQuery.fn.jplist.app.dto.StatusesDTOCollection(context.options,context.observer,[]);for(var i=0;i<context.controls.length;i++){control=context.controls[i];if(jQuery.isFunction(control.getStatus)){status=control["getStatus"](isDefault);if(status){statuses.add(status,false)}}}jQuery.fn.jplist.info(context.options,"getStatuses: ",statuses);return statuses.toArray()};var merge=function(context,isDefault,status){var statuses,statusesCollection;statusesCollection=new jQuery.fn.jplist.app.dto.StatusesDTOCollection(context.options,context.observer,[]);statuses=getStatuses(context,isDefault);for(var i=0;i<statuses.length;i++){statusesCollection.add(statuses[i],false)}statusesCollection.add(status,true);return statusesCollection.toArray()};var getPaths=function(context){var control,paths=[],pathsCollection;pathsCollection=new jQuery.fn.jplist.domain.dom.collections.DataItemMemberPathCollection(context.options,context.observer);for(var i=0;i<context.controls.length;i++){control=context.controls[i];if(jQuery.isFunction(control.getPaths)){control.getPaths(paths);pathsCollection.addRange(paths)}}return pathsCollection["paths"]};var add=function(context,$control){var control=context.controlFactory.create($control,context);if(control){context.controls.push(control)}};var initControls=function(context){var $control;for(var i=0;i<context.$controls.length;i++){$control=context.$controls.eq(i);add(context,$control)}};jQuery.fn.jplist.ui.panel.collections.ControlsCollection=function(options,observer,history,$root,$controls){this.options=options;this.observer=observer;this.history=history;this.$root=$root;this.controlFactory=null;this.$controls=$controls;this.controls=[];this.controlFactory=new jQuery.fn.jplist.ui.panel.ControlFactory(options,observer,history,$root);initControls(this)};jQuery.fn.jplist.ui.panel.collections.ControlsCollection.prototype.merge=function(isDefault,status){return merge(this,isDefault,status)};jQuery.fn.jplist.ui.panel.collections.ControlsCollection.prototype.statusesChangedByDeepLinks=function(params){statusesChangedByDeepLinks(this,params)};jQuery.fn.jplist.ui.panel.collections.ControlsCollection.prototype.setDeepLinks=function(params){setDeepLinks(this,params)};jQuery.fn.jplist.ui.panel.collections.ControlsCollection.prototype.setStatuses=function(statuses,isStorage){setStatuses(this,statuses,isStorage)};jQuery.fn.jplist.ui.panel.collections.ControlsCollection.prototype.getDeepLinksUrl=function(){return getDeepLinksUrl(this)};jQuery.fn.jplist.ui.panel.collections.ControlsCollection.prototype.getStatuses=function(isDefault){return getStatuses(this,isDefault)};jQuery.fn.jplist.ui.panel.collections.ControlsCollection.prototype.getPaths=function(){return getPaths(this)};jQuery.fn.jplist.ui.panel.collections.ControlsCollection.prototype.add=function($control){add(this,$control)}})();(function(){"use strict";var animateToTop=function(context){var offset;offset=jQuery(context.options.animateToTop).offset().top;jQuery("html, body").animate({scrollTop:offset},context.options.animateToTopDuration)};var setStickyPosition=function($stickyEl){var scrollTop=jQuery(window).scrollTop(),top;top=Number($stickyEl.data("top"));if(!isNaN(top)){if(scrollTop>top){$stickyEl.addClass("jplist-sticky")}else{$stickyEl.removeClass("jplist-sticky")}}};var initSticky=function(context,$sticky){$sticky.each(function(){var $stickyEl=jQuery(this),top=$stickyEl.offset().top;$stickyEl.data("top",top);setStickyPosition($stickyEl)});jQuery(window).scroll(function(){$sticky.each(function(){setStickyPosition(jQuery(this))})})};var setStatusesByDeepLink=function(context){var params,isStorageEnabled=false,storageStatuses=[];params=jQuery.fn.jplist.dal.services.DeepLinksService.getUrlParams(context.options);jQuery.fn.jplist.info(context.options,"Set statuses by deep link: ",params);if(params.length<=0){setStatusesFromStorage(context)}else{context.controls.setDeepLinks(params)}};var getDeepLinksURLPerControls=function(context){return context.controls["getDeepLinksUrl"]()};var setStatusesFromStorage=function(context){var storageStatuses=[],isStorageEnabled;isStorageEnabled=context.options.storage==="cookies"||context.options.storage==="localstorage"&&jQuery.fn.jplist.dal.services.LocalStorageService.supported();if(isStorageEnabled){jQuery.fn.jplist.info(context.options,"Storage enabled: ",context.options.storage);if(context.options.storage==="cookies"){storageStatuses=jQuery.fn.jplist.dal.services.CookiesService.restoreCookies(context.options.storageName)}if(context.options.storage==="localstorage"&&jQuery.fn.jplist.dal.services.LocalStorageService.supported()){storageStatuses=jQuery.fn.jplist.dal.services.LocalStorageService.restore(context.options.storageName)}if(storageStatuses.length>0){restoreControlsByStatuses(context,storageStatuses)}else{unknownStatusesChanged(context,true)}}else{unknownStatusesChanged(context,true)}};var setStatuses=function(context,statusesArray){var NOT_RESTORED_FROM_COOKIES=false;context.controls.setStatuses(statusesArray,NOT_RESTORED_FROM_COOKIES);context.history.addList(statusesArray)};var unknownStatusesChanged=function(context,isDefault){var statuses;statuses=context.controls.getStatuses(isDefault);context.observer.trigger(context.observer.events.knownStatusesChanged,[statuses])};var restoreControlsByStatuses=function(context,statusesArray){var RESTORED_FROM_COOKIES=true,statusesInStorage=[];for(var i=0;i<statusesArray.length;i++){if(statusesArray[i].inStorage){statusesInStorage.push(statusesArray[i])}}if(statusesInStorage.length>0){context.controls.setStatuses(statusesInStorage,RESTORED_FROM_COOKIES);context.observer.trigger(context.observer.events.knownStatusesChanged,[statusesInStorage])}};var mergeStatuses=function(context,status){var IS_DEFAULT=false,statuses;if(status.isAnimateToTop){animateToTop(context)}statuses=context.controls.merge(IS_DEFAULT,status);context.observer.trigger(context.observer.events.knownStatusesChanged,[statuses])};var initControlsAndPaths=function(context){var $panel,$controls,paths=[];$panel=context.$root.find(context.options.panelPath);$controls=$panel.find("[data-control-type]");context.controls=new jQuery.fn.jplist.ui.panel.collections.ControlsCollection(context.options,context.observer,context.history,context.$root,$controls);context.paths=context.controls["getPaths"]();if(jQuery.fn.jplist.logEnabled(context.options)){paths=jQuery.map(context.paths,function(el,index){if(el&&el.jqPath){return el.jqPath}return""});jQuery.fn.jplist.info(context.options,"Panel paths: ",paths.join(", "))}};var statusesChangedByDeepLinks=function(context,newStatuses,params){if(context.controls){context.controls.statusesChangedByDeepLinks(params)}};jQuery.fn.jplist.ui.panel.controllers.PanelController=function($root,options,history,observer){this.options=options;this.$root=$root;this.history=history;this.observer=observer;this.$sticky=null;this.paths=null;this.controls=null;initControlsAndPaths(this);this.$sticky=$root.find('[data-sticky="true"]');if(this.$sticky.length>0){initSticky(this,this.$sticky)}};jQuery.fn.jplist.ui.panel.controllers.PanelController.prototype.setStatusesByDeepLink=function(){setStatusesByDeepLink(this)};jQuery.fn.jplist.ui.panel.controllers.PanelController.prototype.setStatusesFromStorage=function(){setStatusesFromStorage(this)};jQuery.fn.jplist.ui.panel.controllers.PanelController.prototype.setStatuses=function(statuses){setStatuses(this,statuses)};jQuery.fn.jplist.ui.panel.controllers.PanelController.prototype.unknownStatusesChanged=function(isDefault){unknownStatusesChanged(this,isDefault)};jQuery.fn.jplist.ui.panel.controllers.PanelController.prototype.mergeStatuses=function(status){mergeStatuses(this,status)};jQuery.fn.jplist.ui.panel.controllers.PanelController.prototype.statusesChangedByDeepLinks=function(newStatuses,params){statusesChangedByDeepLinks(this,newStatuses,params)};jQuery.fn.jplist.ui.panel.controllers.PanelController.prototype.getDeepLinksURLPerControls=function(){return getDeepLinksURLPerControls(this)}})();
//# sourceMappingURL=minified/jplist.core.min.js.map