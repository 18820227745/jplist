/*
 jPList - jQuery Data Grid Controls - http://jplist.com 
 Copyright 2014 jPList Software. All rights reserved.
*/
(function(){jQuery.fn.jplist.ui.controls.DatePickerRangeFilterDTO=function(f,g,h,e){f={path:f,format:g,filterType:"dateRange",prev_year:"",prev_month:"",prev_day:"",next_year:"",next_month:"",next_day:""};h&&(f.prev_year=h.getFullYear(),f.prev_month=h.getMonth(),f.prev_day=h.getDate());e&&(f.next_year=e.getFullYear(),f.next_month=e.getMonth(),f.next_day=e.getDate());return f}})();(function(){var f=function(a){var b={},c,d;c=a.$control.find('[data-type="prev"]');d=a.$control.find('[data-type="next"]');a.$control.data("jplist-datepicker-range-prev",c);a.$control.data("jplist-datepicker-range-next",d);c.off().change(function(){""===jQuery.trim(jQuery(this).val())&&(a.history.addStatus(g(a,!1)),a.observer.trigger(a.observer.events.forceRenderStatusesEvent,[!1]))});d.off().change(function(){""===jQuery.trim(jQuery(this).val())&&(a.history.addStatus(g(a,!1)),a.observer.trigger(a.observer.events.forceRenderStatusesEvent,
[!1]))});b.onSelect=function(b,c){a.history.addStatus(g(a,!1));a.observer.trigger(a.observer.events.forceRenderStatusesEvent,[!1])};a.params.datepickerFunc(c,b);a.params.datepickerFunc(d,b)},g=function(a,b){var c=null,d=c=c=null,e,f,g,h;e=a.$control.data("storage-status");b&&e?c=e:(h=a.$control.attr("data-path").toString(),e=a.$control.attr("data-datetime-format").toString(),f=a.$control.data("jplist-datepicker-range-prev"),g=a.$control.data("jplist-datepicker-range-next"),b||(c=f.datepicker("getDate"),
d=g.datepicker("getDate")),c=new jQuery.fn.jplist.ui.controls.DatePickerRangeFilterDTO(h,e,c,d),c=new jQuery.fn.jplist.app.dto.StatusDTO(a.name,a.action,a.type,c,a.inStorage,a.inAnimation,a.isAnimateToTop,a.inDeepLinking));return c},h=function(a){var b=a.$control.attr("data-datepicker-func");jQuery.isFunction(jQuery.fn.jplist.settings[b])&&(a.params.datepickerFunc=jQuery.fn.jplist.settings[b])},e=function(a){a.params={datepickerFunc:function(){}};h(a);f(a);return jQuery.extend(this,a)};e.prototype.getStatus=
function(a){return g(this,a)};e.prototype.getDeepLink=function(){var a="",b;this.inDeepLinking&&(b=g(this,!1),b.data&&(jQuery.isNumeric(b.data.prev_year)&&jQuery.isNumeric(b.data.prev_month)&&jQuery.isNumeric(b.data.prev_day)&&(a+=this.name+this.options.delimiter0+"prev="+b.data.prev_year+this.options.delimiter2+b.data.prev_month+this.options.delimiter2+b.data.prev_day),jQuery.isNumeric(b.data.next_year)&&jQuery.isNumeric(b.data.next_month)&&jQuery.isNumeric(b.data.next_day)&&(""!==a&&(a+=this.options.delimiter1),
a+=this.name+this.options.delimiter0+"next="+b.data.next_year+this.options.delimiter2+b.data.next_month+this.options.delimiter2+b.data.next_day)));return a};e.prototype.getStatusByDeepLink=function(a,b){var c=null,d;if(this.inDeepLinking&&(c=g(this,!0),c.data))switch(a){case "prev":d=b.split(this.options.delimiter2);3===d.length&&(c.data.prev_year=d[0],c.data.prev_month=d[1],c.data.prev_day=d[2]);break;case "next":d=b.split(this.options.delimiter2),3===d.length&&(c.data.next_year=d[0],c.data.next_month=
d[1],c.data.next_day=d[2])}return c};e.prototype.getPaths=function(a){var b;if(b=this.$control.attr("data-path").toString())b=new jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel(b,"datetime"),a.push(b)};e.prototype.setStatus=function(a,b){var c,d,e;this.inStorage&&b&&this.$control.data("storage-status",a);d=this.$control.data("jplist-datepicker-range-prev");e=this.$control.data("jplist-datepicker-range-next");jQuery.isNumeric(a.data.prev_year)&&jQuery.isNumeric(a.data.prev_month)&&jQuery.isNumeric(a.data.prev_day)?
(c=new Date(a.data.prev_year,a.data.prev_month,a.data.prev_day),d.datepicker("setDate",c)):d.val("");jQuery.isNumeric(a.data.next_year)&&jQuery.isNumeric(a.data.next_month)&&jQuery.isNumeric(a.data.next_day)?(c=new Date(a.data.next_year,a.data.next_month,a.data.next_day),e.datepicker("setDate",c)):e.val("")};jQuery.fn.jplist.ui.controls.DatePickerRangeFilter=function(a){return new e(a)};jQuery.fn.jplist.controlTypes["date-picker-range-filter"]={className:"DatePickerRangeFilter",options:{}}})();(function(){jQuery.fn.jplist.ui.controls.RangeSliderDTO=function(f,g,h,e,a){return{path:f,type:"number",filterType:"range",min:g,max:h,prev:e,next:a}}})();(function(){var f=function(a,b){var c=null,d,e,f,g;b&&a.params.storageStatus?c=a.params.storageStatus:(c=a.$control.attr("data-path").toString(),d=a.params.$uiSlider.slider("option","min"),e=a.params.$uiSlider.slider("option","max"),b?(f=d,g=e):(f=a.params.$uiSlider.slider("values",0),g=a.params.$uiSlider.slider("values",1)),c=new jQuery.fn.jplist.ui.controls.RangeSliderDTO(c,d,e,f,g),c=new jQuery.fn.jplist.app.dto.StatusDTO(a.name,a.action,a.type,c,a.inStorage,a.inAnimation,a.isAnimateToTop,a.inDeepLinking));
return c},g=function(a){a.params.$uiSlider.on("slidechange",function(b,c){a.history.addStatus(f(a,!1));a.observer.trigger(a.observer.events.forceRenderStatusesEvent,[!1])})},h=function(a){var b=a.$control.attr("data-slider-func"),c=a.$control.attr("data-setvalues-func");jQuery.isFunction(jQuery.fn.jplist.settings[b])&&(a.params.uiSliderFunc=jQuery.fn.jplist.settings[b]);jQuery.isFunction(jQuery.fn.jplist.settings[c])&&(a.params.uiSetValuesFunc=jQuery.fn.jplist.settings[c])},e=function(a){a.params=
{$uiSlider:a.$control.find('[data-type="ui-slider"]'),$prev:a.$control.find('[data-type="prev-value"]'),$next:a.$control.find('[data-type="next-value"]'),uiSliderFunc:function(){},uiSetValuesFunc:function(){},controlOptions:a.controlOptions,storageStatus:null};h(a);a.params.uiSliderFunc(a.params.$uiSlider,a.params.$prev,a.params.$next);a.params.uiSetValuesFunc(a.params.$uiSlider,a.params.$prev,a.params.$next);g(a);return jQuery.extend(this,a)};e.prototype.getStatus=function(a){return f(this,a)};e.prototype.getDeepLink=
function(){var a="",b;this.inDeepLinking&&(b=f(this,!1),b.data&&jQuery.isNumeric(b.data.prev)&&jQuery.isNumeric(b.data.next)&&(a=this.name+this.options.delimiter0+"prev"+this.options.delimiter2+"next="+b.data.prev+this.options.delimiter2+b.data.next));return a};e.prototype.getStatusByDeepLink=function(a,b){var c=null,d;this.inDeepLinking&&(c=f(this,!0),c.data&&a==="prev"+this.options.delimiter2+"next"&&(d=b.split(this.options.delimiter2),2===d.length&&(c.data.prev=d[0],c.data.next=d[1])));return c};
e.prototype.getPaths=function(a){var b;if(b=this.$control.attr("data-path").toString())b=new jQuery.fn.jplist.domain.dom.models.DataItemMemberPathModel(b,"number"),a.push(b)};e.prototype.setStatus=function(a,b){var c,d;this.inStorage&&b&&(this.params.storageStatus=a);jQuery.isNumeric(a.data.prev)&&jQuery.isNumeric(a.data.next)&&(c=Number(a.data.prev),d=Number(a.data.next),isNaN(c)||isNaN(d)||(this.params.$uiSlider.slider("values",0)!=c&&this.params.$uiSlider.slider("values",0,c),this.params.$uiSlider.slider("values",
1)!=d&&this.params.$uiSlider.slider("values",1,d)));this.params.controlOptions&&this.params.uiSetValuesFunc(this.params.$uiSlider,this.params.$prev,this.params.$next)};jQuery.fn.jplist.ui.controls.RangeSlider=function(a){return new e(a)};jQuery.fn.jplist.controlTypes["range-slider"]={className:"RangeSlider",options:{}}})();
